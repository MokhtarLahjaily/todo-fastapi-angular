<!-- Header -->
<mat-toolbar color="primary">
  <span>Todo App</span>
  <button mat-icon-button (click)="toggleDarkMode()" class="dark-mode-toggle" matTooltip="Changer le thème">
    <mat-icon>{{ isDarkMode ? 'light_mode' : 'dark_mode' }}</mat-icon>
  </button>
</mat-toolbar>

<!-- Main Content -->
<div class="app-container" [class.dark-theme]="isDarkMode">
  <header class="app-header">
    <h1>{{ title }}</h1>
  </header>

  <main class="app-content">
    <!-- Stats Section -->
    <mat-card class="stats-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon class="stats-icon">analytics</mat-icon>
          Statistiques
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stats-grid">
          <div class="stat-item">
            <mat-icon class="stat-icon">list_alt</mat-icon>
            <span class="stat-label">Total des tâches</span>
            <span class="stat-value">{{ stats.total }}</span>
          </div>
          <div class="stat-item">
            <mat-icon class="stat-icon">pending_actions</mat-icon>
            <span class="stat-label">En cours</span>
            <span class="stat-value">{{ stats.pending }}</span>
          </div>
          <div class="stat-item">
            <mat-icon class="stat-icon">task_alt</mat-icon>
            <span class="stat-label">Terminées</span>
            <span class="stat-value">{{ stats.completed }}</span>
          </div>
          <div class="stat-item">
            <mat-icon class="stat-icon">trending_up</mat-icon>
            <span class="stat-label">Taux de complétion</span>
            <mat-progress-bar
              mode="determinate"
              [value]="stats.completion_rate"
              color="primary"
            ></mat-progress-bar>
            <span class="stat-value">{{ stats.completion_rate }}%</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <app-todo-form (create)="onAddTodo($event)"></app-todo-form>

    <div class="todos-container">
      <app-todo-list
        [todos]="todos"
        (todoDeleted)="onTodoDeleted()"
        (todoUpdated)="onTodoUpdated()"
      ></app-todo-list>
    </div>
  </main>
</div>

<!-- Boîte de dialogue de confirmation -->
<ng-template #deleteDialog>
  <h2 mat-dialog-title>Confirmer la suppression</h2>
  <mat-dialog-content>
    Êtes-vous sûr de vouloir supprimer cette tâche ?
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Annuler</button>
    <button mat-button color="warn" [mat-dialog-close]="true">Supprimer</button>
  </mat-dialog-actions>
</ng-template>
