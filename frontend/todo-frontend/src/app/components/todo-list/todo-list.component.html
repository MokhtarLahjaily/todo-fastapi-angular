<mat-card [class.dark-theme]="isDarkMode">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>list</mat-icon>
        Mes T√¢ches
      </mat-card-title>
      <div class="header-actions">
        <!-- Filtres -->
        <div class="filter-chips">
          <mat-chip-listbox aria-label="Filtres">
            <mat-chip-option 
              [selected]="currentFilter === 'all'"
              (click)="onFilterChange('all')">
              Toutes
            </mat-chip-option>
            <mat-chip-option 
              [selected]="currentFilter === 'pending'"
              (click)="onFilterChange('pending')">
              En cours
            </mat-chip-option>
            <mat-chip-option 
              [selected]="currentFilter === 'completed'"
              (click)="onFilterChange('completed')">
              Termin√©es
            </mat-chip-option>
          </mat-chip-listbox>
        </div>

        <!-- Tri -->
        <mat-form-field class="sort-field">
          <mat-label>Trier par</mat-label>
          <mat-select [(value)]="sortBy" (selectionChange)="onSortChange()">
            <mat-option value="dueDate">Date d'√©ch√©ance</mat-option>
            <mat-option value="priority">Priorit√©</mat-option>
            <mat-option value="createdAt">Date de cr√©ation</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </mat-card-header>
  
    <mat-card-content>
      <!-- Loading -->
      <div *ngIf="loading" class="loading-container">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Chargement des t√¢ches...</p>
      </div>
  
      <!-- Liste des todos -->
      <div *ngIf="!loading" class="todo-list">
        <div *ngIf="filteredTodos.length === 0" class="no-todos">
          <p *ngIf="currentFilter === 'all'">Aucune t√¢che trouv√©e. Commencez par ajouter votre premi√®re t√¢che !</p>
          <p *ngIf="currentFilter === 'pending'">Toutes vos t√¢ches sont termin√©es ! üéâ</p>
          <p *ngIf="currentFilter === 'completed'">Aucune t√¢che termin√©e pour le moment.</p>
        </div>
  
        <div *ngIf="filteredTodos.length > 0" class="todos-container">
          <app-todo-item
            *ngFor="let todo of filteredTodos"
            [todo]="todo"
            (todoDeleted)="todoDeleted.emit()"
            (todoUpdated)="todoUpdated.emit()"
          ></app-todo-item>
        </div>
      </div>
    </mat-card-content>
  </mat-card>